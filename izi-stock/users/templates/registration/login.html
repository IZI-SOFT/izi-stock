{% extends 'base_.html' %}
{% load static %}
{% block content %}


  {% block scrolling_text %}  {% endblock scrolling_text %}
 {% block entreprise_logo %}  {% endblock entreprise_logo %}

    <body style="background: #04414d">
        <div id="layoutAuthentication">
            <div id="layoutAuthentication_content">
                <main>

                    <div class="container">

                        <div class="row justify-content-center">

                            <div class="col-lg-5">
                                <div class="card shadow-lg border-0 rounded-lg mt-5">

{#                                    <div class="card-header"><h3 class="text-center font-weight-light my-4" style="color:#04414d"> Connectez-vous à votre compte</h3></div>#}
{#                                    <div class="card-header">#}



{#                                    </div>#}
                                    <div class="card-body">
                                       <div class="d-flex justify-content-center align-items-center flex-column text-center">

                                          {% if logo %}
                                                <img src="{{ logo }}" alt="Logo" class="img-fluid logo mb-3">
                                            {% else %}
                                                <h1>Bienvenue</h1>
                                            {% endif %}


                                        </div>

                                        <!-- Afficher les messages d'erreur -->
{#                                          {% include 'messages.html' %}#}

                                        <form method="post" action="{% url 'login' %}">
                                            {% csrf_token %}
                                            <div class="d-flex justify-content-center align-items-center flex-column text-center">
                                                  <label for="id_branch" class="text-success text-lg-center fw-bold justify-content-center ">Sélectionnez une succursale</label>
                                             </div>

                                             <div class="form-floating mb-3 " >

                                                 {{ form.branch }}
                                                 {% if form.branch.errors %}
                                                    <div class="text-danger">
                                                        {{ form.branch.errors }}
                                                    </div>
                                                 {% endif %}
                                            </div>
{#                                            <label for="inputusername" class="fw-bold">Nom d'utilisateur</label>#}
                                            <div class="form-floating mb-3">
                                                <div class="input-group">
                                                      <span class="input-group-text">
                                                          <i class="fas fa-user"></i>
                                                      </span>
{#                                                    <input class="form-control" id="inputusername" type="text" placeholder="" />#}
                                                    {{ form.username }}
                                                    {% if form.username.errors %}
                                                        <div class="text-danger">
                                                            {{ form.username.errors }}
                                                        </div>
                                                    {% endif %}
                                                </div>

                                            </div>
{#                                            <label for="inputPassword" class="fw-bold" >Mot de passe</label>#}
                                            <div class="form-floating mb-3">
                                                <div class="input-group">
                                                    <span class="input-group-text">
                                                        <i class="fas fa-lock"></i>
                                                    </span>
                                                    {{ form.password }}
                                                <button type="button" class="btn btn-outline-secondary" id="togglePassword" tabindex="-1">
                                                    <i class="fas fa-eye" id="passwordIcon"></i>
                                                </button>
                                                     {% if form.password.errors %}
                                                            <div class="text-danger">
                                                                {{ form.password.errors }}
                                                            </div>
                                                     {% endif %}
                                                </div>


                                                    <div class="form-floating mb-3">
                                                     <div id="rememberMe">

                                                         {{ form.remember_me }}
                                                         <label for="rememberMe" class="fw-bold" >Resté connecté</label>
                                                     </div>
                                                    </div>

                                                     {% if form.remember_me.errors %}
                                                            <div class="text-danger">
                                                                {{ form.remember_me.errors }}
                                                            </div>
                                                     {% endif %}



                                            </div>

                                            <div class="d-flex align-items-center justify-content-between mt-4 mb-0">

                                                <button type="submit" class="btn text-light w-100" style="background: #04414d" >Se connecter</button>
                                            </div>
                                        </form>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </main>
            </div>

        </div>
        {% include 'footer.html' %}
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
        <script src="{% static 'js/scripts.js' %}"></script>

    <script>
    document.addEventListener('DOMContentLoaded', function () {
        const togglePassword = document.getElementById('togglePassword');
        const passwordField = document.querySelector('input[name="password"]');
        const passwordIcon = document.getElementById('passwordIcon');

        togglePassword.addEventListener('click', function () {
            // Alterner entre le type "password" et "text"
            const type = passwordField.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordField.setAttribute('type', type);

            // Alterner l'icône entre "fa-eye" et "fa-eye-slash"
            if (type === 'password') {
                passwordIcon.classList.remove('fa-eye-slash');
                passwordIcon.classList.add('fa-eye');
            } else {
                passwordIcon.classList.remove('fa-eye');
                passwordIcon.classList.add('fa-eye-slash');
            }
        });
    });
</script>


    </body>
{% endblock content %}



